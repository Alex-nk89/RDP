{"version":3,"file":"TimeInput.js","sources":["../../../src/components/TimeInput/TimeInput.tsx"],"sourcesContent":["import React, { useState, useRef, forwardRef } from 'react';\nimport {\n  InputBaseProps,\n  InputWrapperBaseProps,\n  InputStylesNames,\n  InputWrapperStylesNames,\n  DefaultProps,\n  Input,\n  InputWrapper,\n  MantineSize,\n  ClassNames,\n  useExtractedMargins,\n} from '@mantine/core';\nimport { useMergedRef, useUncontrolled, useDidUpdate, useUuid } from '@mantine/hooks';\nimport dayjs from 'dayjs';\nimport { TimeField } from './TimeField/TimeField';\nimport { createTimeHandler } from './create-time-handler/create-time-handler';\nimport { getTimeValues } from './get-time-values/get-time-value';\nimport useStyles from './TimeInput.styles';\n\nexport type TimeInputStylesNames =\n  | ClassNames<typeof useStyles>\n  | InputStylesNames\n  | InputWrapperStylesNames;\n\nexport interface TimeInputProps\n  extends DefaultProps<TimeInputStylesNames>,\n    InputBaseProps,\n    InputWrapperBaseProps,\n    Omit<React.ComponentPropsWithoutRef<'div'>, 'onChange' | 'value' | 'defaultValue'> {\n  /** Input size */\n  size?: MantineSize;\n\n  /** Controlled input value */\n  value?: Date;\n\n  /** Uncontrolled input default value */\n  defaultValue?: Date;\n\n  /** Controlled input onChange handler */\n  onChange?(value: Date): void;\n\n  /** Display seconds input */\n  withSeconds?: boolean;\n\n  /** Uncontrolled input name */\n  name?: string;\n\n  /** aria-label for hours input */\n  hoursLabel?: string;\n\n  /** aria-label for minutes input */\n  minutesLabel?: string;\n\n  /** aria-label for seconds input */\n  secondsLabel?: string;\n\n  /** Disable field */\n  disabled?: boolean;\n}\n\nexport const TimeInput = forwardRef<HTMLInputElement, TimeInputProps>(\n  (\n    {\n      required,\n      label,\n      error,\n      description,\n      className,\n      style,\n      size = 'sm',\n      wrapperProps,\n      classNames,\n      styles,\n      id,\n      value,\n      defaultValue,\n      onChange,\n      withSeconds = false,\n      name,\n      hoursLabel,\n      minutesLabel,\n      secondsLabel,\n      disabled = false,\n      sx,\n      ...others\n    }: TimeInputProps,\n    ref\n  ) => {\n    const { classes, cx } = useStyles({ size }, { classNames, styles, name: 'TimeInput' });\n    const { mergedStyles, rest } = useExtractedMargins({ others, style });\n    const uuid = useUuid(id);\n\n    const [_value, handleChange] = useUncontrolled({\n      value,\n      defaultValue,\n      finalValue: new Date(),\n      rule: (val) => val instanceof Date,\n      onChange,\n    });\n\n    const hoursRef = useRef<HTMLInputElement>();\n    const minutesRef = useRef<HTMLInputElement>();\n    const secondsRef = useRef<HTMLInputElement>();\n    const [time, setTime] = useState(getTimeValues(_value));\n\n    useDidUpdate(() => {\n      setTime(getTimeValues(_value));\n    }, [_value]);\n\n    const handleHoursChange = createTimeHandler({\n      onChange: (val) => {\n        setTime((c) => ({ ...c, hours: val }));\n        handleChange(dayjs(_value).set('hours', parseInt(val, 10)).toDate());\n      },\n      min: 0,\n      max: 23,\n      maxValue: 2,\n      nextRef: minutesRef,\n    });\n\n    const handleMinutesChange = createTimeHandler({\n      onChange: (val) => {\n        setTime((c) => ({ ...c, minutes: val }));\n        handleChange(dayjs(_value).set('minutes', parseInt(val, 10)).toDate());\n      },\n      min: 0,\n      max: 59,\n      maxValue: 5,\n      nextRef: secondsRef,\n    });\n\n    const handleSecondsChange = createTimeHandler({\n      onChange: (val) => {\n        setTime((c) => ({ ...c, seconds: val }));\n        handleChange(dayjs(_value).set('seconds', parseInt(val, 10)).toDate());\n      },\n      min: 0,\n      max: 59,\n      maxValue: 5,\n    });\n\n    return (\n      <InputWrapper\n        required={required}\n        label={label}\n        error={error}\n        description={description}\n        className={className}\n        style={mergedStyles}\n        classNames={classNames}\n        styles={styles}\n        size={size}\n        __staticSelector=\"TimeInput\"\n        id={uuid}\n        sx={sx}\n        {...wrapperProps}\n      >\n        <Input\n          component=\"div\"\n          __staticSelector=\"TimeInput\"\n          required={required}\n          invalid={!!error}\n          onClick={() => hoursRef.current.focus()}\n          size={size}\n          className={cx({ [classes.disabled]: disabled })}\n          classNames={classNames}\n          styles={styles}\n          disabled={disabled}\n          {...rest}\n        >\n          <div className={classes.controls}>\n            <TimeField\n              ref={useMergedRef(hoursRef, ref)}\n              value={time.hours}\n              onChange={handleHoursChange}\n              setValue={(val) => setTime((c) => ({ ...c, hours: val }))}\n              id={uuid}\n              className={classes.timeInput}\n              withSeparator\n              size={size}\n              max={23}\n              aria-label={hoursLabel}\n              disabled={disabled}\n            />\n\n            <TimeField\n              ref={minutesRef}\n              value={time.minutes}\n              onChange={handleMinutesChange}\n              setValue={(val) => setTime((c) => ({ ...c, minutes: val }))}\n              className={classes.timeInput}\n              withSeparator={withSeconds}\n              size={size}\n              max={59}\n              aria-label={minutesLabel}\n              disabled={disabled}\n            />\n\n            {withSeconds && (\n              <TimeField\n                ref={secondsRef}\n                value={time.seconds}\n                onChange={handleSecondsChange}\n                setValue={(val) => setTime((c) => ({ ...c, seconds: val }))}\n                className={classes.timeInput}\n                size={size}\n                max={59}\n                aria-label={secondsLabel}\n                disabled={disabled}\n              />\n            )}\n\n            {name && <input type=\"hidden\" name={name} value={_value.toISOString()} />}\n          </div>\n        </Input>\n      </InputWrapper>\n    );\n  }\n);\n\nTimeInput.displayName = '@mantine/dates/TimeInput';\n"],"names":["forwardRef","useStyles","useExtractedMargins","useUuid","useUncontrolled","useRef","useState","getTimeValues","useDidUpdate","createTimeHandler","dayjs","React","InputWrapper","Input","TimeField","useMergedRef"],"mappings":"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"}