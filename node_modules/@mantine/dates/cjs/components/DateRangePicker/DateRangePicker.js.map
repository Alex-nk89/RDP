{"version":3,"file":"DateRangePicker.js","sources":["../../../src/components/DateRangePicker/DateRangePicker.tsx"],"sourcesContent":["import dayjs from 'dayjs';\nimport React, { useState, useRef, forwardRef } from 'react';\nimport { useUncontrolled, useMergedRef, upperFirst } from '@mantine/hooks';\nimport { useMantineTheme } from '@mantine/core';\nimport { FirstDayOfWeek } from '../../types';\nimport { CalendarSharedProps } from '../CalendarBase/CalendarBase';\nimport { RangeCalendar } from '../RangeCalendar/RangeCalendar';\nimport { DatePickerBase, DatePickerBaseSharedProps } from '../DatePickerBase/DatePickerBase';\n\nexport interface DateRangePickerProps\n  extends Omit<DatePickerBaseSharedProps, 'value' | 'onChange'>,\n    Omit<CalendarSharedProps, 'size' | 'styles' | 'classNames' | 'value' | 'onChange'> {\n  /** Selected date, required with controlled input */\n  value?: [Date | null, Date | null];\n\n  /** Called when date range changes */\n  onChange?(value: [Date | null, Date | null]): void;\n\n  /** Default value for uncontrolled input */\n  defaultValue?: [Date | null, Date | null];\n\n  /** Set to false to force dropdown to stay open after date was selected */\n  closeCalendarOnChange?: boolean;\n\n  /** dayjs input format */\n  inputFormat?: string;\n\n  /** Control initial dropdown opened state */\n  initiallyOpened?: boolean;\n\n  /** Input name, useful fon uncontrolled variant to capture data with native form */\n  name?: string;\n\n  /** Separator between dates */\n  labelSeparator?: string;\n\n  /** Set first day of the week */\n  firstDayOfWeek?: FirstDayOfWeek;\n\n  /** Allow one date to be selected as range */\n  allowSingleDateInRange?: boolean;\n\n  /** Allows to show multiple months */\n  amountOfMonths?: number;\n}\n\nconst validationRule = (val: any) =>\n  Array.isArray(val) && val.length === 2 && val.every((v) => v instanceof Date);\n\nexport const DateRangePicker = forwardRef<HTMLButtonElement, DateRangePickerProps>(\n  (\n    {\n      value,\n      onChange,\n      defaultValue,\n      classNames,\n      styles,\n      shadow = 'sm',\n      locale = 'en',\n      inputFormat,\n      transitionDuration = 200,\n      transitionTimingFunction,\n      nextMonthLabel,\n      previousMonthLabel,\n      closeCalendarOnChange = true,\n      labelFormat = 'MMMM YYYY',\n      dayClassName,\n      dayStyle,\n      disableOutsideEvents,\n      minDate,\n      maxDate,\n      excludeDate,\n      initialMonth,\n      initiallyOpened = false,\n      name = 'date',\n      size = 'sm',\n      dropdownType = 'popover',\n      labelSeparator = 'â€“',\n      clearable = true,\n      clearButtonLabel,\n      firstDayOfWeek = 'monday',\n      allowSingleDateInRange = false,\n      amountOfMonths = 1,\n      withinPortal = true,\n      ...others\n    }: DateRangePickerProps,\n    ref\n  ) => {\n    const theme = useMantineTheme();\n    const finalLocale = locale || theme.datesLocale;\n    const dateFormat = inputFormat || theme.dateFormat;\n    const [dropdownOpened, setDropdownOpened] = useState(initiallyOpened);\n    const calendarSize = size === 'lg' || size === 'xl' ? 'md' : 'sm';\n    const inputRef = useRef<HTMLInputElement>();\n    const [_value, setValue] = useUncontrolled<[Date, Date]>({\n      value,\n      defaultValue,\n      finalValue: [null, null],\n      onChange,\n      rule: validationRule,\n    });\n\n    const handleValueChange = (range: [Date, Date]) => {\n      setValue(range);\n      if (closeCalendarOnChange && validationRule(range)) {\n        setDropdownOpened(false);\n        window.setTimeout(() => inputRef.current?.focus(), 0);\n      }\n    };\n\n    const valueValid = validationRule(_value);\n\n    const handleClear = () => {\n      setValue([null, null]);\n      setDropdownOpened(true);\n      inputRef.current?.focus();\n    };\n\n    return (\n      <>\n        <DatePickerBase\n          dropdownOpened={dropdownOpened}\n          setDropdownOpened={setDropdownOpened}\n          shadow={shadow}\n          transitionDuration={transitionDuration}\n          ref={useMergedRef(ref, inputRef)}\n          size={size}\n          styles={styles}\n          classNames={classNames}\n          inputLabel={\n            valueValid\n              ? `${upperFirst(\n                  dayjs(_value[0]).locale(finalLocale).format(dateFormat)\n                )} ${labelSeparator} ${upperFirst(\n                  dayjs(_value[1]).locale(finalLocale).format(dateFormat)\n                )}`\n              : ''\n          }\n          __staticSelector=\"DateRangePicker\"\n          dropdownType={dropdownType}\n          clearable={clearable && valueValid}\n          clearButtonLabel={clearButtonLabel}\n          onClear={handleClear}\n          withinPortal={withinPortal}\n          {...others}\n        >\n          <RangeCalendar\n            classNames={classNames}\n            styles={styles}\n            locale={finalLocale}\n            nextMonthLabel={nextMonthLabel}\n            previousMonthLabel={previousMonthLabel}\n            initialMonth={valueValid ? _value[0] : initialMonth}\n            value={_value}\n            onChange={handleValueChange}\n            labelFormat={labelFormat}\n            dayClassName={dayClassName}\n            dayStyle={dayStyle}\n            disableOutsideEvents={disableOutsideEvents}\n            minDate={minDate}\n            maxDate={maxDate}\n            excludeDate={excludeDate}\n            __staticSelector=\"DateRangePicker\"\n            fullWidth={dropdownType === 'modal'}\n            firstDayOfWeek={firstDayOfWeek}\n            size={dropdownType === 'modal' ? 'lg' : calendarSize}\n            allowSingleDateInRange={allowSingleDateInRange}\n            amountOfMonths={amountOfMonths}\n          />\n        </DatePickerBase>\n\n        <input\n          type=\"hidden\"\n          name={`${name}-from`}\n          value={valueValid ? _value[0].toISOString() : ''}\n        />\n\n        <input\n          type=\"hidden\"\n          name={`${name}-to`}\n          value={valueValid ? _value[1].toISOString() : ''}\n        />\n      </>\n    );\n  }\n);\n\nDateRangePicker.displayName = '@mantine/dates/DateRangePicker';\n"],"names":["forwardRef","useMantineTheme","useState","useRef","useUncontrolled","React","DatePickerBase","useMergedRef","upperFirst","dayjs","RangeCalendar"],"mappings":"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"}